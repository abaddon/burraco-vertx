# Burraco Card game Vert.x version...

The scope of this project is trying to introduce Vert.x in an existing DDD project based on Hexagonal architecture without change the domain mode, the commands and the ports.
Vert.x has been introduced creating only new adapters that implement the ports already defined by the project.
More details regarding the original projects are on [https://github.com/abaddon/burraco/](https://github.com/abaddon/burraco/)

*Vert.x components used:*
- cluster
- discovery service
- service proxy
- Mysql client
- Web
  
## Schema

### Services
##### Engine
It contains the Burraco game logic. An aggregate called BurracoGame contains all the game's rules. 
The REST interface executes the commands on the aggregate.

*Features*
- Vertx HTTP REST API interface

##### EventStore
It's the repository used to store all the domain events generated by the aggregates. Each event received is persisted on a Mysql DB.
The events store receive the event publishing an RPC interface shared throw the Vert.x Eventbus 

*Features*
- Vertx EventBus RPC interface, used to 
- Vertx JDBC client or normal JDBC client

##### ReadModel (TODO)
It will contain all the projections fed from the events generated by the aggregates. 

*Features*
...

### Execution with Docker
To execute all the services at the same time:
```
#build the Engine
cd Engine
./gradle build
#build the EventStore
cd ../EventStore
./gradle build
#run the services
cd ..
docker-compose up
```

### Execution
##### Engine
```
cd Engine
./gradle shadowJar 
java -jar build/libs/Engine-1.0-SNAPSHOT-fat.jar
```
##### EventStore
```
cd Engine
./gradle shadowJar 
java -jar ./build/libs/EventStore-1.0-SNAPSHOT-fat.jar
```

### APIs
###### Create a new Burraco game
```
curl --location --request POST 'localhost:8080/games/burraco' \
--header 'Content-Type: application/json' \
--data-raw '{
    "gameType": "BURRACO"
}'
```
